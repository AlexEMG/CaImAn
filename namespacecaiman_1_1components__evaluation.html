<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Caiman: caiman.components_evaluation Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Caiman_logo_FIsmall.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Caiman
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A Computational toolbox for large scale Calcium Imaging Analysis</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacecaiman_1_1components__evaluation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">caiman.components_evaluation Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a115ea8d0f9c41cb31cb7fe05535f65f7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#a115ea8d0f9c41cb31cb7fe05535f65f7">estimate_noise_mode</a> (traces, robust_std=False, use_mode_fast=False, return_all=False)</td></tr>
<tr class="memdesc:a115ea8d0f9c41cb31cb7fe05535f65f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">estimate the noise in the traces under assumption that signals are sparse and only positive.  <a href="#a115ea8d0f9c41cb31cb7fe05535f65f7">More...</a><br /></td></tr>
<tr class="separator:a115ea8d0f9c41cb31cb7fe05535f65f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967e8c445c84976814609f9c120153a2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#a967e8c445c84976814609f9c120153a2">compute_event_exceptionality</a> (traces, robust_std=False, N=5, use_mode_fast=False)</td></tr>
<tr class="memdesc:a967e8c445c84976814609f9c120153a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a metric and order components according to the probabilty if some "exceptional events" (like a spike).  <a href="#a967e8c445c84976814609f9c120153a2">More...</a><br /></td></tr>
<tr class="separator:a967e8c445c84976814609f9c120153a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa88632c960b46b09e3e8d4120ac3bc16"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#aa88632c960b46b09e3e8d4120ac3bc16">find_activity_intervals</a> (C, Npeaks=5, tB=-5, tA=25, thres=0.3)</td></tr>
<tr class="separator:aa88632c960b46b09e3e8d4120ac3bc16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d76d63424939fa0004f5cc800f0105"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#ad0d76d63424939fa0004f5cc800f0105">classify_components_ep</a> (Y, A, C, b, f, Athresh=0.1, Npeaks=5, tB=-5, tA=25, thres=0.3)</td></tr>
<tr class="separator:ad0d76d63424939fa0004f5cc800f0105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a8435be788c8e75130e41f884adb0f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#ad2a8435be788c8e75130e41f884adb0f">evaluate_components</a> (Y, traces, A, C, b, f, final_frate, remove_baseline=True, N=5, robust_std=False, Athresh=0.1, Npeaks=5, thresh_C=0.3)</td></tr>
<tr class="memdesc:ad2a8435be788c8e75130e41f884adb0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a metric and order components according to the probabilty if some "exceptional events" (like a spike).  <a href="#ad2a8435be788c8e75130e41f884adb0f">More...</a><br /></td></tr>
<tr class="separator:ad2a8435be788c8e75130e41f884adb0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ebc78b1982bec697fe2fd84e6f997e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#a68ebc78b1982bec697fe2fd84e6f997e">chunker</a> (seq, size)</td></tr>
<tr class="separator:a68ebc78b1982bec697fe2fd84e6f997e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc8731dfc865b4380b0e0894bbb3a34d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecaiman_1_1components__evaluation.html#afc8731dfc865b4380b0e0894bbb3a34d">estimate_components_quality</a> (traces, Y, A, C, b, f, final_frate=30, Npeaks=10, r_values_min=.95, fitness_min=-100, fitness_delta_min=-100, return_all=False, N=5, remove_baseline=True)</td></tr>
<tr class="memdesc:afc8731dfc865b4380b0e0894bbb3a34d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a metric and order components according to the probabilty if some "exceptional events" (like a spike).  <a href="#afc8731dfc865b4380b0e0894bbb3a34d">More...</a><br /></td></tr>
<tr class="separator:afc8731dfc865b4380b0e0894bbb3a34d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a68ebc78b1982bec697fe2fd84e6f997e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68ebc78b1982bec697fe2fd84e6f997e">&#9670;&nbsp;</a></span>chunker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.chunker </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>seq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00322">322</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_a68ebc78b1982bec697fe2fd84e6f997e_cgraph.svg" width="1150" height="171"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad0d76d63424939fa0004f5cc800f0105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0d76d63424939fa0004f5cc800f0105">&#9670;&nbsp;</a></span>classify_components_ep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.classify_components_ep </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Athresh</em> = <code>0.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Npeaks</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tB</em> = <code>-5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tA</em> = <code>25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thres</em> = <code>0.3</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00173">173</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_ad0d76d63424939fa0004f5cc800f0105_cgraph.svg" width="1048" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_ad0d76d63424939fa0004f5cc800f0105_icgraph.svg" width="875" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a967e8c445c84976814609f9c120153a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a967e8c445c84976814609f9c120153a2">&#9670;&nbsp;</a></span>compute_event_exceptionality()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.compute_event_exceptionality </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>traces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robust_std</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>N</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_mode_fast</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a metric and order components according to the probabilty if some "exceptional events" (like a spike). </p>
<p>Such probability is defined as the likeihood of observing the actual trace value over N samples given an estimated noise distribution. The function first estimates the noise distribution by considering the dispersion around the mode. This is done only using values lower than the mode. The estimation of the noise std is made robust by using the approximation std=iqr/1.349. Then, the probavility of having N consecutive eventsis estimated. This probability is used to order the components.</p>
<h2>Parameters </h2>
<p>Y ndarray movie x,y,t</p>
<p>A scipy sparse array spatial components</p>
<p>traces ndarray Fluorescence traces</p>
<p>N int N number of consecutive events</p>
<h2></h2>
<dl class="section return"><dt>Returns</dt><dd>fitness ndarray value estimate of the quality of components (the lesser the better)</dd>
<dd>
erfc ndarray probability at each time step of observing the N consequtive actual trace values given the distribution of noise</dd>
<dd>
noise_est ndarray the components ordered according to the fitness </dd></dl>

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00093">93</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_a967e8c445c84976814609f9c120153a2_cgraph.svg" width="632" height="116"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_a967e8c445c84976814609f9c120153a2_icgraph.svg" width="926" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="afc8731dfc865b4380b0e0894bbb3a34d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc8731dfc865b4380b0e0894bbb3a34d">&#9670;&nbsp;</a></span>estimate_components_quality()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.estimate_components_quality </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>traces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>final_frate</em> = <code>30</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Npeaks</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>r_values_min</em> = <code>.95</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fitness_min</em> = <code>-100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fitness_delta_min</em> = <code>-100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_all</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>N</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove_baseline</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a metric and order components according to the probabilty if some "exceptional events" (like a spike). </p>
<p>Such probability is defined as the likeihood of observing the actual trace value over N samples given an estimated noise distribution. The function first estimates the noise distribution by considering the dispersion around the mode. This is done only using values lower than the mode. The estimation of the noise std is made robust by using the approximation std=iqr/1.349. Then, the probavility of having N consecutive eventsis estimated. This probability is used to order the components. The algorithm also measures the reliability of the spatial mask by comparing the filters in A with the average of the movies over samples where exceptional events happen, after removing (if possible) frames when neighboring neurons were active</p>
<h2>Parameters </h2>
<p>Y ndarray movie x,y,t</p>
<p>A various types outputs of cnmf</p>
<p>traces ndarray Fluorescence traces</p>
<p>N int N number of consecutive events probability multiplied</p>
<p>Npeaks int</p>
<p>r_values_min list minimum correlation between component and spatial mask obtained by averaging important points</p>
<p>fitness_min ndarray minimum acceptable quality of components (the lesser the better) on the raw trace</p>
<p>fitness_delta_min ndarray minimum acceptable the quality of components (the lesser the better) on diff(trace)</p>
<p>thresh_C float fraction of the maximum of C that is used as minimum peak height</p>
<h2></h2>
<dl class="section return"><dt>Returns</dt><dd>idx_components ndarray the components ordered according to the fitness</dd>
<dd>
idx_components_bad ndarray the components ordered according to the fitness</dd>
<dd>
fitness_raw ndarray value estimate of the quality of components (the lesser the better) on the raw trace</dd>
<dd>
fitness_delta ndarray value estimate of the quality of components (the lesser the better) on diff(trace)</dd>
<dd>
r_values list float values representing correlation between component and spatial mask obtained by averaging important points </dd></dl>

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00385">385</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_afc8731dfc865b4380b0e0894bbb3a34d_cgraph.svg" width="1032" height="171"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_afc8731dfc865b4380b0e0894bbb3a34d_icgraph.svg" width="459" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a115ea8d0f9c41cb31cb7fe05535f65f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a115ea8d0f9c41cb31cb7fe05535f65f7">&#9670;&nbsp;</a></span>estimate_noise_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.estimate_noise_mode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>traces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robust_std</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>use_mode_fast</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>return_all</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>estimate the noise in the traces under assumption that signals are sparse and only positive. </p>
<p>The last dimension should be time. </p>

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00022">22</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_a115ea8d0f9c41cb31cb7fe05535f65f7_cgraph.svg" width="582" height="116"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad2a8435be788c8e75130e41f884adb0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a8435be788c8e75130e41f884adb0f">&#9670;&nbsp;</a></span>evaluate_components()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.evaluate_components </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>traces</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>final_frate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remove_baseline</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>N</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robust_std</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Athresh</em> = <code>0.1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Npeaks</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thresh_C</em> = <code>0.3</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define a metric and order components according to the probabilty if some "exceptional events" (like a spike). </p>
<p>Such probability is defined as the likeihood of observing the actual trace value over N samples given an estimated noise distribution. The function first estimates the noise distribution by considering the dispersion around the mode. This is done only using values lower than the mode. The estimation of the noise std is made robust by using the approximation std=iqr/1.349. Then, the probavility of having N consecutive eventsis estimated. This probability is used to order the components. The algorithm also measures the reliability of the spatial mask by comparing the filters in A with the average of the movies over samples where exceptional events happen, after removing (if possible) frames when neighboring neurons were active</p>
<h2>Parameters </h2>
<p>Y ndarray movie x,y,t</p>
<p>A various types outputs of cnmf</p>
<p>traces ndarray Fluorescence traces</p>
<p>remove_baseline bool whether to remove the baseline in a rolling fashion *(8 percentile)</p>
<p>N int N number of consecutive events probability multiplied</p>
<pre class="fragment">Athresh float
    threshold on overlap of A (between 0 and 1)

Npeaks  int



thresh_C    float
    fraction of the maximum of C that is used as minimum peak height
</pre><h2></h2>
<dl class="section return"><dt>Returns</dt><dd>idx_components ndarray the components ordered according to the fitness</dd>
<dd>
fitness_raw ndarray value estimate of the quality of components (the lesser the better) on the raw trace</dd>
<dd>
fitness_delta ndarray value estimate of the quality of components (the lesser the better) on diff(trace)</dd>
<dd>
erfc_raw ndarray probability at each time step of observing the N consequtive actual trace values given the distribution of noise on the raw trace</dd>
<dd>
erfc_raw ndarray probability at each time step of observing the N consequtive actual trace values given the distribution of noise on diff(trace)</dd>
<dd>
r_values list float values representing correlation between component and spatial mask obtained by averaging important points</dd>
<dd>
significant_samples ndarray indexes of samples used to obtain the spatial mask by average </dd></dl>

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00275">275</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_ad2a8435be788c8e75130e41f884adb0f_cgraph.svg" width="832" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_ad2a8435be788c8e75130e41f884adb0f_icgraph.svg" width="675" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa88632c960b46b09e3e8d4120ac3bc16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa88632c960b46b09e3e8d4120ac3bc16">&#9670;&nbsp;</a></span>find_activity_intervals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def caiman.components_evaluation.find_activity_intervals </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Npeaks</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tB</em> = <code>-5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tA</em> = <code>25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thres</em> = <code>0.3</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="components__evaluation_8py_source.html#l00144">144</a> of file <a class="el" href="components__evaluation_8py_source.html">components_evaluation.py</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacecaiman_1_1components__evaluation_aa88632c960b46b09e3e8d4120ac3bc16_icgraph.svg" width="1072" height="168"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="footer" role="contentinfo">
&copy; Copyright 2015, Eftychios Pnevmatikakis and Andrea Giovannucci.Created using 
<a href="http://www.stack.nl/~dimitri/doxygen/">Doxygen</a> </div>